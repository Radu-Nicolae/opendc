The Multi-Meta-Model analysis is setup using a json file. The Multi-Model is a top-layer applied on top of the simulator,
capable to leverage into a singular tool the prediction of multiple models. The Meta-Model is a model generated from the 
Multi-Model, and predicts using the predictions of individual models.

The Multi-Model's properties can be set using a JSON file. The JSON file must be linked to the scenario file and is required
to follow the structure below.

## Schema

The schema for the scenario file is provided in [schema](MultiMetaModelSchema.md)
In the following section, we describe the different components of the schema.

### General Structure

| Variable             | Type     | Required? | Default       | Possible Answers                                  | Description                                                                                                                                                                 |
|----------------------|----------|-----------|---------------|---------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| multimodel           | boolean  | no        | true          | true, false                                       | Whether or not to build a Multi-Model. If set to false, a Meta-Model will not be computed either.                                                                           |
| metamodel            | boolean  | no        | true          | true, false                                       | Whether to build a Meta-Model.                                                                                                                                              |
| metric               | string   | yes       | N/A           | N/A                                               | What metric to be analyzed from the computed files.                                                                                                                         |
| window_size          | integer  | no        | 1             | any positive, non-zero, integer                   | The size of the window, used for aggregating the chunks.                                                                                                                    |
| aggregation_function | string   | no        | "mean"        | "mean", "median"                                  | The function used by the window for aggregating the chunks (e.g., for "mean", the window will compute the mean of the samples).                                             |
| metamodel_function   | string   | no        | "mean"        | "mean", "median"                                  | The function used by the Meta-Model to be generated. For "mean", the Meta-Model takes the mean of the individual models, at the granularity established by the window-size. |
| plot_type            | string   | no        | "time_series" | "time_series", "cummulative_total", "commulative_time_series" | The type of the plot, generated by the Multi-Model and Meta-Model.                                                                                                          |
| plot_title           | string   | no        | ""            | any string                                        | The title of the plot. |
| x_label              | string   | no        | "Time"        | any string                                        | The label for the x-axis of the plot. |
| y_label              | string   | no        | "Metric Unit" | any string                                        | The label for the y-axis of the plot. |
| y_min | double | no | null | any positive, non-zero, double | The minimum value for the y-axis of the plot. |
| y_max | double | no | null | any positive, non-zero, double | The maximum value for the y-axis of the plot. |
 
## Examples
In the following section, we discuss several examples of Multi-Meta-Model setup files. Any setup file can be verified
using the JSON schema defined in [schema](MultiMetaModelSchema).

### Simple
The simplest Multi-Meta-Model setup that can be provided to OpenDC is shown below:
```json
{
    "metric": "power_draw"
}
```

This configuration creates a Multi-Model and Meta-Model on the power_draw. The window size is 1 (i.e., same as no window is applied),
and the aggregation function, for both the window and for the Meta-Model generation is the default -- mean. The plot type is time_series.

### Complex
A more complex Multi-Meta-Model setup, where the user has more control on teh generated output, is show below:

```json
{
    "multimodel": true,
    "metamodel": false,
    "metric": "carbon_emission",
    "window_size": 10,
    "aggregation_function": "median",
    "metamodel_function": "mean",
    "plot_type": "cummulative_time_series",
    "plot_title": "Carbon Emission Prediction",
    "x_label": "Time [days]",
    "y_label": "Carbon Emission [gCO2/kWh]",
    "y_min": 500,
    "y_max": 1000
}
```

This configuration creates a Multi-Model and a Meta-Model which predicts the carbon_emission. The window size is 10, and 
the aggregation function (for the window) is median. The Meta-Model function is mean. The plot type is cummulative_time_series,
which starts from a y-axis value of 500 and goes up to 1000. Therefore, the Multi-Model and the Meta-Model will show only
the values greater than y_min (500) and smaller than y_max (1000).
